<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: scripts/board_modals_core.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: scripts/board_modals_core.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* === board_modals_core.js | Handles opening and closing of task and add-task modals === */


/* === Task Modal: Open by ID === */
/**
 * Opens the task modal for a given task ID, loads the appropriate template,
 * applies user-story or technical styling, restores subtask states, and
 * prevents background scrolling.
 * @param {number} id - The ID of the task to open in the modal.
 */
window.openModalById = (id) => {
    const task = Array.isArray(window.tasks)
      ? window.tasks.find((x) => x.id === id)
      : null;
    if (!task) return;
    const modal = document.getElementById("task-modal");
    const content = document.getElementById("task-modal-content");
    if (!modal || !content) return;
    const taskType = task.type;
    const isTechnical = isTechnicalType(taskType);
    const isUserStory = isUserStoryType(taskType);
    if (task.id > 1000 &amp;&amp; typeof bigCardDynamicHtml === "function") {
      if (isUserStory &amp;&amp; !document.getElementById("user-story-css")) {
        const link = document.createElement("link");
        link.id = "user-story-css";
        link.rel = "stylesheet";
        link.href = "../board_code/user_story_template.css";
        document.head.appendChild(link);
      }
      if (isTechnical &amp;&amp; !document.getElementById("technical-css")) {
        const link = document.createElement("link");
        link.id = "technical-css";
        link.rel = "stylesheet";
        link.href = "../styles/board-technical.css";
        document.head.appendChild(link);
      }
      if (isTechnical &amp;&amp; typeof bigCardDynamicTechnicalHtml === "function") {
        content.innerHTML = bigCardDynamicTechnicalHtml(task);
      } else {
        content.innerHTML = bigCardDynamicHtml(task);
      }
      modal.style.display = "flex";
      document.body.classList.add("no-scroll");
      return; 
    }
    if (!isTechnical &amp;&amp; !document.getElementById("user-story-css")) {
      const link = document.createElement("link");
      link.id = "user-story-css";
      link.rel = "stylesheet";
      link.href = "../board_code/user_story_template.css"; 
      document.head.appendChild(link);
    }
    if (isTechnical &amp;&amp; !document.getElementById("technical-css")) {
      const link = document.createElement("link");
      link.id = "technical-css";
      link.rel = "stylesheet";
      link.href = "../styles/board-technical.css";
      document.head.appendChild(link);
    }
    const html =
      isTechnical &amp;&amp; typeof getTechnicalTaskTemplate === "function"
        ? getTechnicalTaskTemplate(task)
        : typeof bigCardHtml === "function"
        ? bigCardHtml(task)
        : fallbackModal(task);
    content.innerHTML = html;
    const s = typeof saved !== "undefined" ? saved[id] : null;
    if (s) {
      const boxes = content.querySelectorAll(
        '.subtask-list input[type="checkbox"]'
      );
      boxes.forEach((b, i) => (b.checked = !!s[i]));
      if (boxes.length) updateSubtasks(id, boxes[0]);
    }
    modal.style.display = "flex";
    document.body.classList.add("no-scroll");
  };
  

    /* === Close Task Modal === */
  /**
 * Closes the task modal and restores page scrolling.
 */
function closeModal() {
    const modal = document.getElementById("task-modal");
    if (modal) modal.style.display = "none";
    document.body.classList.remove("no-scroll");
  }


    /* === Alias: Close Task Modal Wrapper === */
  /**
 * Wrapper function for closing the task modal.
 */
function closeTaskModal() {
    closeModal();
  }
  

  /* === Add Task Overlay: Open and Close === */
/**
 * Opens the Add Task overlay, loads its template, initializes handlers,
 * renders contacts, injects required CSS, and focuses the title input.
 */
function openAddTask() {
    const overlay = document.getElementById("addtask-overlay");
    const content = document.getElementById("addtask-content");
    if (!overlay || !content) return;
    if (!document.getElementById("addtask-css")) {
      const link = document.createElement("link");
      link.id = "addtask-css";
      link.rel = "stylesheet";
      link.href = "./addTask_template.css";
      document.head.appendChild(link);
    }
    content.innerHTML =
      typeof getAddTaskTemplate === "function"
        ? getAddTaskTemplate()
        : '&lt;div style="padding:16px">AddTask-Template fehlt.&lt;/div>';
        renderContactsInDropdown();
        overlay.classList.add("open");
    document.body.classList.add("no-scroll");
    if (typeof initAddTaskTemplateHandlers === "function") {
      initAddTaskTemplateHandlers();
    }
    const titleInput = content.querySelector("#title");
    if (titleInput) titleInput.focus();
  }

  
  /**
 * Closes the Add Task overlay, resets global task-editing state,
 * clears selected users, removes injected CSS, and restores scroll.
 */
function closeAddTask() {
    const overlay = document.getElementById("addtask-overlay");
    const content = document.getElementById("addtask-content");
    if (!overlay || !content) return;
    overlay.classList.remove("open");
    document.body.classList.remove("no-scroll");
    window.taskBeingEdited = null;
    window.selectedUsers = [];
    window.selectedUserColors = {};
    window.isDropdownOpen = false;
    setTimeout(() => {
      content.innerHTML = "";
      const css = document.getElementById("addtask-css");
      if (css) css.remove();
    }, 300);
  }
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#BASE_URL">BASE_URL</a></li><li><a href="global.html#activeHighlightColumnId">activeHighlightColumnId</a></li><li><a href="global.html#addActiveClassToSidebarButtons">addActiveClassToSidebarButtons</a></li><li><a href="global.html#addContactToLocalStorageAndAPI">addContactToLocalStorageAndAPI</a></li><li><a href="global.html#addNewContact">addNewContact</a></li><li><a href="global.html#afterRender">afterRender</a></li><li><a href="global.html#applyStatusChangeForDraggedTask">applyStatusChangeForDraggedTask</a></li><li><a href="global.html#assignedToDataExtractSafe">assignedToDataExtractSafe</a></li><li><a href="global.html#autoMoveTimeoutId">autoMoveTimeoutId</a></li><li><a href="global.html#bigCardDynamicHtml">bigCardDynamicHtml</a></li><li><a href="global.html#bigCardDynamicTechnicalHtml">bigCardDynamicTechnicalHtml</a></li><li><a href="global.html#bigCardHtml">bigCardHtml</a></li><li><a href="global.html#buildSubtaskListItem">buildSubtaskListItem</a></li><li><a href="global.html#callWhiteScreen">callWhiteScreen</a></li><li><a href="global.html#cancelScheduledAutoMove">cancelScheduledAutoMove</a></li><li><a href="global.html#checkIfBlockIsFilled">checkIfBlockIsFilled</a></li><li><a href="global.html#checkIfLogedIn">checkIfLogedIn</a></li><li><a href="global.html#checkLogin">checkLogin</a></li><li><a href="global.html#checkPolicyandAnswers">checkPolicyandAnswers</a></li><li><a href="global.html#checkUsernamePassword">checkUsernamePassword</a></li><li><a href="global.html#clearAllColumnHighlights">clearAllColumnHighlights</a></li><li><a href="global.html#clearForm">clearForm</a></li><li><a href="global.html#closeAddTask">closeAddTask</a></li><li><a href="global.html#closeModal">closeModal</a></li><li><a href="global.html#closeTaskModal">closeTaskModal</a></li><li><a href="global.html#closeWhiteScreen">closeWhiteScreen</a></li><li><a href="global.html#collectTaskFromForm">collectTaskFromForm</a></li><li><a href="global.html#contactBlock">contactBlock</a></li><li><a href="global.html#createTask">createTask</a></li><li><a href="global.html#createUser">createUser</a></li><li><a href="global.html#currentDragCardEl">currentDragCardEl</a></li><li><a href="global.html#currentlySelectedContact">currentlySelectedContact</a></li><li><a href="global.html#deleteContact">deleteContact</a></li><li><a href="global.html#deleteContactinEditContactWindow">deleteContactinEditContactWindow</a></li><li><a href="global.html#deleteDynamicTask">deleteDynamicTask</a></li><li><a href="global.html#deleteIdFromLocalStorage">deleteIdFromLocalStorage</a></li><li><a href="global.html#deleteTask">deleteTask</a></li><li><a href="global.html#demoContactTemplate">demoContactTemplate</a></li><li><a href="global.html#demoTasks">demoTasks</a></li><li><a href="global.html#editContact">editContact</a></li><li><a href="global.html#emptyTheAddContactFormular">emptyTheAddContactFormular</a></li><li><a href="global.html#enableSubtaskEditing">enableSubtaskEditing</a></li><li><a href="global.html#fallbackModal">fallbackModal</a></li><li><a href="global.html#fillArray">fillArray</a></li><li><a href="global.html#filterAssignList">filterAssignList</a></li><li><a href="global.html#finalizeAssignSearch">finalizeAssignSearch</a></li><li><a href="global.html#findColumnByPointer">findColumnByPointer</a></li><li><a href="global.html#findIndexFromUsername">findIndexFromUsername</a></li><li><a href="global.html#generateTaskId">generateTaskId</a></li><li><a href="global.html#getAddTaskTemplate">getAddTaskTemplate</a></li><li><a href="global.html#getAllTasks">getAllTasks</a></li><li><a href="global.html#getAllUsers">getAllUsers</a></li><li><a href="global.html#getAssignSearchValue">getAssignSearchValue</a></li><li><a href="global.html#getBadgeClass">getBadgeClass</a></li><li><a href="global.html#getBigCardDynamicHtml">getBigCardDynamicHtml</a></li><li><a href="global.html#getBigCardDynamicTechnicalHtml">getBigCardDynamicTechnicalHtml</a></li><li><a href="global.html#getColorFromItem">getColorFromItem</a></li><li><a href="global.html#getContactColorType">getContactColorType</a></li><li><a href="global.html#getDraggedTask">getDraggedTask</a></li><li><a href="global.html#getInitials">getInitials</a></li><li><a href="global.html#getInitialsFromName">getInitialsFromName</a></li><li><a href="global.html#getNextDeadline">getNextDeadline</a></li><li><a href="global.html#getRandomInt">getRandomInt</a></li><li><a href="global.html#getSubtasksSafe">getSubtasksSafe</a></li><li><a href="global.html#getTaskCounts">getTaskCounts</a></li><li><a href="global.html#getTechnicalTaskTemplate">getTechnicalTaskTemplate</a></li><li><a href="global.html#getUserID">getUserID</a></li><li><a href="global.html#getWhiteScreen">getWhiteScreen</a></li><li><a href="global.html#greetUserName">greetUserName</a></li><li><a href="global.html#handleAssignInput">handleAssignInput</a></li><li><a href="global.html#handleContactClick">handleContactClick</a></li><li><a href="global.html#hideAddContactFormular">hideAddContactFormular</a></li><li><a href="global.html#hideEditContactFormular">hideEditContactFormular</a></li><li><a href="global.html#hydrateAssignSection">hydrateAssignSection</a></li><li><a href="global.html#initAddTaskTemplateHandlers">initAddTaskTemplateHandlers</a></li><li><a href="global.html#isAssignPlaceholderEvent">isAssignPlaceholderEvent</a></li><li><a href="global.html#isDemoTask">isDemoTask</a></li><li><a href="global.html#isRealDate">isRealDate</a></li><li><a href="global.html#isTechnicalType">isTechnicalType</a></li><li><a href="global.html#isUserStoryType">isUserStoryType</a></li><li><a href="global.html#isValidDateFormat">isValidDateFormat</a></li><li><a href="global.html#jumpToLogin">jumpToLogin</a></li><li><a href="global.html#lastDragPointerX">lastDragPointerX</a></li><li><a href="global.html#loadTasks">loadTasks</a></li><li><a href="global.html#loadTasksFromFirebase">loadTasksFromFirebase</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#loginAsGuest">loginAsGuest</a></li><li><a href="global.html#makeFirstLetterBig">makeFirstLetterBig</a></li><li><a href="global.html#mapCategoryToType">mapCategoryToType</a></li><li><a href="global.html#matchesSearch">matchesSearch</a></li><li><a href="global.html#nameOfTheCard">nameOfTheCard</a></li><li><a href="global.html#needsDraggingClassAfterRender">needsDraggingClassAfterRender</a></li><li><a href="global.html#normaliseSubtaskProgress">normaliseSubtaskProgress</a></li><li><a href="global.html#normalizeTaskType">normalizeTaskType</a></li><li><a href="global.html#onclickFunction">onclickFunction</a></li><li><a href="global.html#onloadFunctionHeader">onloadFunctionHeader</a></li><li><a href="global.html#openAddTask">openAddTask</a></li><li><a href="global.html#openModalDynamic">openModalDynamic</a></li><li><a href="global.html#patchDataWithID">patchDataWithID</a></li><li><a href="global.html#pendingAutoMoveStatus">pendingAutoMoveStatus</a></li><li><a href="global.html#pendingDragTiltClass">pendingDragTiltClass</a></li><li><a href="global.html#persistTasks">persistTasks</a></li><li><a href="global.html#pollSummary">pollSummary</a></li><li><a href="global.html#populateEditOverlay">populateEditOverlay</a></li><li><a href="global.html#postDataWithID">postDataWithID</a></li><li><a href="global.html#prevOnload">prevOnload</a></li><li><a href="global.html#priorit%25C3%25A4tIcon">priorit√§tIcon</a></li><li><a href="global.html#processAssignSearch">processAssignSearch</a></li><li><a href="global.html#pushExampleContactsOneTimeInLocalStorage">pushExampleContactsOneTimeInLocalStorage</a></li><li><a href="global.html#putUserDataIntoLocalStorage">putUserDataIntoLocalStorage</a></li><li><a href="global.html#putUsernameInContactList">putUsernameInContactList</a></li><li><a href="global.html#readSubtasksFromForm">readSubtasksFromForm</a></li><li><a href="global.html#removeContentfromAllContactBlocks">removeContentfromAllContactBlocks</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#renderAddContact">renderAddContact</a></li><li><a href="global.html#renderAssignedAvatars">renderAssignedAvatars</a></li><li><a href="global.html#renderContactList">renderContactList</a></li><li><a href="global.html#renderContactsInDropdown">renderContactsInDropdown</a></li><li><a href="global.html#renderEditContact">renderEditContact</a></li><li><a href="global.html#renderSingleContact">renderSingleContact</a></li><li><a href="global.html#renderUserMenuePopupMenu">renderUserMenuePopupMenu</a></li><li><a href="global.html#resetAssignSearch">resetAssignSearch</a></li><li><a href="global.html#sanitizeDueDateInput">sanitizeDueDateInput</a></li><li><a href="global.html#saveEditedSubtask">saveEditedSubtask</a></li><li><a href="global.html#saveTask">saveTask</a></li><li><a href="global.html#saveTaskEdits">saveTaskEdits</a></li><li><a href="global.html#scheduleAutoMoveTo">scheduleAutoMoveTo</a></li><li><a href="global.html#searchQuery">searchQuery</a></li><li><a href="global.html#selectAssignUser">selectAssignUser</a></li><li><a href="global.html#setActiveSidebarByURL">setActiveSidebarByURL</a></li><li><a href="global.html#setContactsIntoContactblock">setContactsIntoContactblock</a></li><li><a href="global.html#setLetterInUserBall">setLetterInUserBall</a></li><li><a href="global.html#setPriorityAddTask">setPriorityAddTask</a></li><li><a href="global.html#setSummaryText">setSummaryText</a></li><li><a href="global.html#setUserDataValue">setUserDataValue</a></li><li><a href="global.html#shouldResetAssignSearch">shouldResetAssignSearch</a></li><li><a href="global.html#showAddContactFormular">showAddContactFormular</a></li><li><a href="global.html#showContactToast">showContactToast</a></li><li><a href="global.html#showEditContactFormular">showEditContactFormular</a></li><li><a href="global.html#showToast">showToast</a></li><li><a href="global.html#singleContactTemplate">singleContactTemplate</a></li><li><a href="global.html#sortUserToAlphabeticalOrder">sortUserToAlphabeticalOrder</a></li><li><a href="global.html#startEditTask">startEditTask</a></li><li><a href="global.html#statusByColumnId">statusByColumnId</a></li><li><a href="global.html#subscribeToFirebaseUpdates">subscribeToFirebaseUpdates</a></li><li><a href="global.html#toggleAssignDropdown">toggleAssignDropdown</a></li><li><a href="global.html#toggleContactHighlight">toggleContactHighlight</a></li><li><a href="global.html#toggleUserMenuePopupMenu">toggleUserMenuePopupMenu</a></li><li><a href="global.html#updateAssignPlaceholder">updateAssignPlaceholder</a></li><li><a href="global.html#updateFriendsInLocalStorage">updateFriendsInLocalStorage</a></li><li><a href="global.html#updateSearchClearButtonState">updateSearchClearButtonState</a></li><li><a href="global.html#updateSummary">updateSummary</a></li><li><a href="global.html#updateTimeout">updateTimeout</a></li><li><a href="global.html#updateUserFriendslist">updateUserFriendslist</a></li><li><a href="global.html#userMenuTemplate">userMenuTemplate</a></li><li><a href="global.html#validateDueDate">validateDueDate</a></li><li><a href="global.html#whichCardActuellDrop">whichCardActuellDrop</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Fri Nov 21 2025 13:33:32 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
